<!doctype html>
<html>
<head>
  <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#fbfbfa">

<!-- iPhone icon for Add to Home Screen -->
 <meta name="apple-mobile-web-app-title" content="Timer">

<link rel="apple-touch-icon" href="icon-192.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title> Timer </title>
  <style>

    .controls{
  display: flex;
  gap: 12px;
  justify-content: center;
  margin: 10px 0 4px;
  flex-wrap: wrap;
}
.field{
  display: grid;
  gap: 6px;
  text-align: left;
  font-size: 12px;
  color: #555;
}
select, input{
  width: 160px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid #eaeaea;
  background: #fff;
  font-size: 14px;
  outline: none;
}
select:focus, input:focus{
  border-color: #d7d7d7;
}

    body {
      margin: 0;
      height: 100vh;
      display: grid;
      place-items: center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: #fbfbfa;
      color: #111;
    }
    .card {
      width: min(420px, 92vw);
      padding: 28px;
      border: 1px solid #eee;
      border-radius: 24px;
      background: white;
      box-shadow: 0 10px 30px rgba(0,0,0,0.06);
      text-align: center;
    }
    h1 { margin: 0 0 14px; font-size: 20px; font-weight: 600; }
    .sub{
  margin: 0 0 18px;
  font-size: 14px;
  color: #555;
  line-height: 1.6;
  letter-spacing: 0.02em;
}


    button {
      border: 1px solid #e5e5e5;
      background: white;
      padding: 10px 14px;
      border-radius: 999px;
      cursor: pointer;
    }
    button:hover { background: #fafafa; }
    .row { display: flex; gap: 10px; justify-content: center; margin-top: 16px; }

    svg { display: block; margin: 14px auto 0; }
    #label { font-size: 36px; font-weight: 500; }
  </style>
</head>

<body>
  <div class="card">
    <h1>Timer</h1>
    <p class="sub">„ÄÄÂÆâÂøç‰∏çÂãïÂ¶ÇÂ§ßÂú∞ÔºåÈùúËßÄ‰∫ãÊÖãÁ¨ëÈ¢®Èõ™üòÑ </p> <div class="controls">
  <label class="field">
    <span>Duration</span>
    <select id="preset">
      <option value="1">1 min</option>
      <option value="5" selected>5 min</option>
      <option value="10">10 min</option>
      <option value="25">25 min</option>
       <option value="30">30 min</option>
    </select>
  </label>

  <label class="field">
    <span>Custom</span>
    <input id="custom" type="number" inputmode="numeric" min="1" max="180" placeholder="minutes" />
  </label>
</div>


    <svg width="260" height="260" viewBox="0 0 260 260" aria-label="Timer">
      <circle cx="130" cy="130" r="110" fill="none" stroke="#efefef" stroke-width="18" />
      <circle id="ring" cx="130" cy="130" r="110"
        fill="none" stroke="#111" stroke-width="18"
        stroke-linecap="round"
        transform="rotate(-90 130 130)" />
      <text id="label" x="130" y="140" text-anchor="middle">05:00</text>
    </svg>

    <div class="row">
      <button id="start">Start</button>
      <button id="pause">Pause</button>
      <button id="reset">Reset</button>
    </div>
  </div>

  <script>
    const ring = document.getElementById("ring");
    const label = document.getElementById("label");
    const preset = document.getElementById("preset");
    const custom = document.getElementById("custom");


    const r = 110;
    const C = 2 * Math.PI * r;
    ring.style.strokeDasharray = `${C}`;
    ring.style.strokeDashoffset = `0`;

     
    
  let totalMs = Number(preset.value) * 60 * 1000; // from dropdown
let remainingMs = totalMs;

 let running = false;
    let lastT = null;
    let rafId = null;
    
function setDurationMinutes(mins) {
  const m = Math.max(1, Math.min(180, Math.floor(mins))); // clamp 1‚Äì180
  totalMs = m * 60 * 1000;

  // Zen rule: changing duration resets the timer
  running = false;
  lastT = null;
  if (rafId) cancelAnimationFrame(rafId);
  remainingMs = totalMs;
  render();
}
preset.addEventListener("change", () => {
  custom.value = "";                 // clear custom when picking preset
  setDurationMinutes(Number(preset.value));
});

custom.addEventListener("change", () => {
  if (!custom.value) return;
  setDurationMinutes(Number(custom.value));
});




    function fmt(ms) {
      ms = Math.max(0, ms);
      const s = Math.floor(ms / 1000);
      const m = Math.floor(s / 60);
      const ss = String(s % 60).padStart(2, "0");
      return `${String(m).padStart(2, "0")}:${ss}`;
    }

    function render() {
      const p = remainingMs / totalMs;
      ring.style.strokeDashoffset = `${C * (1 - p)}`;
      label.textContent = fmt(remainingMs);
    }

    function tick(t) {
      if (!running) return;
      if (lastT == null) lastT = t;
      const dt = t - lastT;
      lastT = t;

      remainingMs -= dt;
      if (remainingMs <= 0) {
        remainingMs = 0;
        running = false;
        lastT = null;
        render();
        return;
      }
      render();
      rafId = requestAnimationFrame(tick);
    }

    document.getElementById("start").onclick = () => {
      if (running) return;
      running = true;
      rafId = requestAnimationFrame(tick);
    };

    document.getElementById("pause").onclick = () => {
      running = false;
      lastT = null;
      if (rafId) cancelAnimationFrame(rafId);
    };

    document.getElementById("reset").onclick = () => {
      running = false;
      lastT = null;
      if (rafId) cancelAnimationFrame(rafId);
      remainingMs = totalMs;
      render();
    };

    render();
  </script>
  <script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("./service-worker.js");
  }
</script>
</body>
</html>
